%% https://futureboy.us/pgp.html
%% https://enigmail.net/index.php/en/download/changelog
%% https://davesteele.github.io/gpg/2014/09/20/anatomy-of-a-gpg-key/
%% https://github.com/dnet/eks/blob/master/src/pgp_keystore.erl
%% https://github.com/dnet/eks


jocke@eve:~$ gpg --full-generate-key
gpg (GnuPG) 2.2.19; Copyright (C) 2019 Free Software Foundation, Inc.
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.

Please select what kind of key you want:
   (1) RSA and RSA (default)
   (2) DSA and Elgamal
   (3) DSA (sign only)
   (4) RSA (sign only)
  (14) Existing key from card
Your selection? 2
DSA keys may be between 1024 and 3072 bits long.
What keysize do you want? (2048) 
Requested keysize is 2048 bits
Please specify how long the key should be valid.
         0 = key does not expire
      <n>  = key expires in n days
      <n>w = key expires in n weeks
      <n>m = key expires in n months
      <n>y = key expires in n years
Key is valid for? (0) 0
Key does not expire at all
Is this correct? (y/N) y

GnuPG needs to construct a user ID to identify your key.

Real name: Joakim G.
Email address: joagre@gmail.com
Comment: 
You selected this USER-ID:
    "Joakim G. <joagre@gmail.com>"

Change (N)ame, (C)omment, (E)mail or (O)kay/(Q)uit? O
We need to generate a lot of random bytes. It is a good idea to perform
some other action (type on the keyboard, move the mouse, utilize the
disks) during the prime generation; this gives the random number
generator a better chance to gain enough entropy.
gpg: WARNING: some OpenPGP programs can't handle a DSA key with this digest size
We need to generate a lot of random bytes. It is a good idea to perform
some other action (type on the keyboard, move the mouse, utilize the
disks) during the prime generation; this gives the random number
generator a better chance to gain enough entropy.
gpg: key FD75C6D467E7FC64 marked as ultimately trusted
gpg: directory '/home/jocke/.gnupg/openpgp-revocs.d' created
gpg: revocation certificate stored as '/home/jocke/.gnupg/openpgp-revocs.d/0DA83766DAFB0DD58717DCE7FD75C6D467E7FC64.rev'
public and secret key created and signed.

pub   dsa2048 2021-02-15 [SC]
      0DA83766DAFB0DD58717DCE7FD75C6D467E7FC64
uid                      Joakim G. <joagre@gmail.com>
sub   elg2048 2021-02-15 [E]



jocke@eve:~$ gpg -a --export "Joakim G." | gpg --list-packets --debug 0x02 --verbose
gpg: Note: no default option file '/home/jocke/.gnupg/gpg.conf'
gpg: enabled debug flags: mpi
gpg: secmem usage: 0/65536 bytes in 0 blocks
# off=0 ctb=99 tag=6 hlen=3 plen=814
:public key packet:
	version 4, algo 17, created 1613408957, expires 0
	pkey[0]: F27C8EAB9D4CA95CE341569F37BE362F3190B68A81C9DAB5F0903AF8B28CED99E16241E86F9C17117128E93F320DF6885C90A7EB42D762808E95E6593E36AF30571382645049C32841266632A1C3D25A63CD89EE7BEFAA4CB67386E1E110A88A1E058901B92E19E2D8D1C7A0606B567F19C160421279D9E85D8FEACEA274D08534E851081ABFC98BBCD39F2266F9903B5E659D28E35197A56AEFE2417BC73D55B314E40C86E023B4968508B2EBCB70BD9967723F6A0B081853A121A757F0A216DDC5E8829867744573C363902A02A6C3103A969A7D8E52C3D1D66F231CB16AFC450DD8862CCD7A5BDFB229F3CB010DEC30D8E28FCFE58C81EF20EEFC0BA75F4B
	pkey[1]: C48D356577D0CCA43EF275F9FCD2CCEF9E60A11259AB0DA9BDD79886E8416559
	pkey[2]: 59F050C8B133C630009C81C342E3757121A6FF75E7F77774F4D60145C5581E0C3E59518F412D420F455E7EAB9B12DB746DC7334685FCF26E1DCEEAE3E365B7654C35D6BD45097DF3064729105F8A8E0F2484BFA1E1012C170F42E276046A9412EBFD411CA0E8A0892FF9C500822F103A0103948E74F6BAC88114834B9440E92338BC38202652FCDAC2E1836351F9284F04D83392FBAB170325B53089E3DCEE3157D70BA6C52CCD0C985FA6327F92402873029FC04C1D1529B12A98B4326345460B8F6812684C315576B23C5A181755C1AE8A563F3435C198AFB9139D81B0027C573A6C46D370505F3E9A2BD8F4A742E416CC517CFBAD6223F5F87224729346BD
	pkey[3]: 68E2DC5A1CCBD0629B665DD47D63F56457BF4CBEFB6A299D744DCA6F514A37D01CB7A9B339BFEA654E80B437A6DB69D4AD02A82F643AE6FB3511A4600CB579B4259CB11AF3D5BACB5FF555ED417F5588B0168361CE86DBDFF38605A7EE9865E84DED3500FA08D36CEFBA4CEF29F29A29E1C945226AA5EDA478B144D8B0CE8F8F9A1F84C4BD3E685E8A29FC5B2ACBB14C148F6B3E46CFE6E598E30DB0F541BD77702723FA91CB103DB9881398EFFE920FBDFE18350D548836E80804849816DE10ADF66F8FCAD58F9E994B0CA85CF0EBBA840318D4ADCA196563DF6626A83ACE7665148FA7D0976CF4B7CD7D47DCEFC57785C2B2E8D5ADDEAA9DABD532AE207015
	keyid: FD75C6D467E7FC64
# off=817 ctb=b4 tag=13 hlen=2 plen=28
:user ID packet: "Joakim G. <joagre@gmail.com>"
# off=847 ctb=88 tag=2 hlen=2 plen=144
:signature packet: algo 17, keyid FD75C6D467E7FC64
	version 4, created 1613408957, md5len 0, sigclass 0x13
	digest algo 8, begin of digest f2 79
	hashed subpkt 33 len 21 (issuer fpr v4 0DA83766DAFB0DD58717DCE7FD75C6D467E7FC64)
	hashed subpkt 2 len 4 (sig created 2021-02-15)
	hashed subpkt 27 len 1 (key flags: 03)
	hashed subpkt 11 len 4 (pref-sym-algos: 9 8 7 2)
	hashed subpkt 21 len 5 (pref-hash-algos: 10 9 8 11 2)
	hashed subpkt 22 len 3 (pref-zip-algos: 2 3 1)
	hashed subpkt 30 len 1 (features: 01)
	hashed subpkt 23 len 1 (keyserver preferences: 80)
	subpkt 16 len 8 (issuer key ID FD75C6D467E7FC64)
	data: 04D507AC6B5852A1229B3A5C87F01E0B09C41C37EE4FFA8E96F88679F7EB038B
	data: 335C4865601722012F7D6844552942F893AC701CCA05EBA666C92EBCE2180E80
# off=993 ctb=b9 tag=14 hlen=3 plen=525
:public sub key packet:
	version 4, algo 16, created 1613408957, expires 0
	pkey[0]: B598DB33CF5D26A54BB9C59DDB7E15B8FB223AE52818A7A1E8A440A444786BFC8BD28AF106D69262BD42F4575596528E2815B21CE9E655FB05427181B9E13BE49B0F8261E4037374296857E37FAC373A356D89A206FDF29C04A59B4DEAE43B7331494A961E0D9C516D301E3C46F3D7FA034479BC667E750D6655916ABA949F087DCE37BD14C5FF732A3056078CC1DF8057BD978C9B692C97ECC3AE26E83938B48E77C566D00EE4F73166B15B29F7787187A325E641451E5A64FA6CEB9959F899F2A206468C1C7078B431165423E85DD8955B2649735C1D9D3188992DDAEEA3E4DF1D4EEAB98E0CD49AE0C9D90286F5AF0B9838FF6AA5FBF3345B1F5A74AC9A3B
	pkey[1]: 05
	pkey[2]: 43F982157F226E0153FE91870F017272219F26C938E2EF2C71826C49E7BD866B667BE6D9CC2D87F049F155A8444B1503D19E69C860B19A7B9863FD2BE09A40D54037637FDAB27E459AD511560C0C11C2C94D13D7EF8768E44C078890C2388BD4B7112F67B4E9133E0D63A26C2A6239FFC9DAF9C8D7846611850AFC90D32255B918A6FB9F106F4644276FEB29F84E85814577234D0F3CE0838F1A443395485234BD29E26AAF554F5CF554A903389F45CCA7FBAAC5C504E58335A743BD88C40406F0807A737A7C2BB7CB3197E6F765489FA7824890E3E174062E770A9C2EAA9A9F96F13D682C06A0C455FCD8949E0A4FFED773B33C899BA6811FC690EDC90C4032
	keyid: 8D54EB83644C97DF
# off=1521 ctb=88 tag=2 hlen=2 plen=120
:signature packet: algo 17, keyid FD75C6D467E7FC64
	version 4, created 1613408957, md5len 0, sigclass 0x18
	digest algo 8, begin of digest bb 5e
	hashed subpkt 33 len 21 (issuer fpr v4 0DA83766DAFB0DD58717DCE7FD75C6D467E7FC64)
	hashed subpkt 2 len 4 (sig created 2021-02-15)
	hashed subpkt 27 len 1 (key flags: 0C)
	subpkt 16 len 8 (issuer key ID FD75C6D467E7FC64)
	data: 905C92FB3F1ED28F0A476B249631730888A8742148962722EB11BC9C4459162A
	data: 950D7250B2EF360E55DCE6AA934C58D78B873FB17E17DDA0D7F6077B3872C5C1




-----BEGIN PGP PUBLIC KEY BLOCK-----

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
F92g1/YHezhyxcE=
=QACQ
-----END PGP PUBLIC KEY BLOCK-----

gpg --locate-keys alice@127.0.0.1

curl --output bajs.dat -v --insecure "https://localhost/.well-known/openpgpkey/localhost/hu/localpartdigest?l=alice"



